{% extends "badger/base.html" %}

{% set TITLE = award.__str__() %}

{% set user = award.user %}
{% set award_url = request.build_absolute_uri(url('badger.views.award_detail', award.badge.slug, award.id)) %}
{% if award.image %}
    {% set image_url = award.image.url %}
{% elif badge.image %}
    {% set image_url = badge.image.url %}
{% else %}
    {# TODO: Put the URL for default badge image in settings #}
    {% set image_url = "{{ static('img/default-badge.png') }}" %}
{% endif %}

{% block pageid %}award_detail{% endblock %}

{% block extrahead %}
    <link rel="alternate" type="application/json"
        title="{{ _('{title} (JSON)') | f(title=award) }}"
        href="{{ request.build_absolute_uri(url('badger.award_detail_json', badge.slug, award.pk)) }}" />

     <meta property="og:type" content="article"> 
     <meta property="og:url" content="{{ award_url }}">
     <meta property="og:site_name" content="{{ settings.SITE_TITLE }}">
     <meta property="og:image" content="{{ request.build_absolute_uri(image_url) }}">
     <meta property="og:title" content="{{ badge.title }}">
     <meta property="og:description" content="{{ award.user }} earned the badge &quot;{{ badge.title }}&quot; on {{ settings.SITE_TITLE }}!"> 
     <meta property="og:updated_time" content="{{ award.created.isoformat() }}Z"> 
     <meta property="article:published_time" content="{{ award.created.isoformat() }}Z"> 
     <meta property="article:author" content="{{ request.build_absolute_uri(url('profiles.profile_view', award.creator.username)) }}">
     {% for tag in badge.tags.all() %}
     <meta property="article:tag" content="{{ tag.name }}">
     {% endfor %}
{% endblock %}

{% block content %}
    {% include "badger/includes/badge_awarded.html" %}
    {% include "badger/includes/award.html" %}
{% endblock %}
