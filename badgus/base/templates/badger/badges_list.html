{% extends "badger/base.html" %}

{% block pageid %}badges{% endblock %}

{% block content %}
{% set query_string = request.GET.get('q', None) %}

<header class="page-header">
    <h2>
        {% if tag_name %}
            {% trans badge_url=url('badger.views.badges_list'), tag=tag_name %}
                <a href="{{ badge_url }}">Badges</a> tagged '{{ tag }}'
            {% endtrans %}
        {% elif query_string %}
            <a href="{{ url('badger.views.badges_list') }}">{{ _('Badges') }}</a>
        {% else %}
            {{ _('Badges') }}
        {% endif %}
    </h2>
</header>

{% if query_string %}
    {% set badge_count = badge_list.count() %}
    {% if badge_count == 0 %}
        <p>
            {{ _('We couldn\'t find any results for <strong>&ldquo;{query}&rdquo;</strong>.') | fe(query=query_string) }}
        </p>
        <p>
            {{ _('Try searching for something else.') }}
        </p>
    {% else %}
        <p>
            {% if badge_count == 1 %}
                {{ _('Found <strong>{count}</strong> badge matching <strong>&ldquo;{query}&rdquo;</strong>.') | fe(count=badge_count, query=query_string) }}
            {% else %}
                {{ _('Found <strong>{count}</strong> badges matching <strong>&ldquo;{query}&rdquo;</strong>.') | fe(count=badge_count, query=query_string) }}
            {% endif %}
        </p>
    {% endif %}
{% endif %}

{% include "badger/includes/badges_list.html" %}

{% if award_list %}
    <h3>{{ _('Recent awards for these badges') }}</h3>
    {% with award_list = award_list[:5], hide_pagination = True %}
        {% include "badger/includes/awards_list.html" %}
    {% endwith %}
{% endif %}

{% endblock %}
